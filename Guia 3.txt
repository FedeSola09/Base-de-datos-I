
-- Guia nÂª 3

CREATE DATABASE IF NOT EXISTS guia3
USE guia3

-- Punto 1
CREATE TABLE Customers (
CustomerID INT PRIMARY KEY AUTO_INCREMENTS,
FirstName VARCHAR(50) NOT NULL,
LastName VARCHAR(50) NOT NULL,
Email VARCHAR(100) UNIQUE,
DateOfBirth DATE
);

-- Punto 2
CREATE TABLE Orders (
OrderID INT PRIMARY KEY AUTO_INCREMENTS,
OrderDate DATE NOT NULL,
CustomerID INT 
FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
TotalAmount FLOAT(5,2) NOT NULL
);

-- Punto 3 
CREATE TABLE Products (
ProductID INT PRIMARY KEY AUTO_INCREMENTS,
ProductName VARCHAR(100) NOT NULL,
Price FLOAT(5,2) NOT NULL UNSIGNED,
StockQuantity INT NOT NULL UNSIGNED
);

-- Punto 4
ALTER TABLE Customers
ADD COLUMN PhoneNumber TEXT(15) UNIQUE;

-- Punto 5
ALTER TABLE Products
ADD UNIQUE (ProductName);

-- Punto 6
CREATE TABLE OrderDetails (
OrderID INT 
FOREIGN KEY (OrderID) REFERENCES Orders,
ProductID INT 
FOREIGN KEY (ProductID) REFERENCES Products,
Quantity INT NOT NULL UNSIGNED,
PRIMARY KEY (OrderID, ProductID)
);

-- Punto 7
ALTER TABLE Customers
DROP COLUMN PhoneNumber;

-- Punto 8
ALTER TABLE Products
MODIFY COLUMN Price FLOAT(12, 2);

-- Punto 9
ALTER TABLE Customers
RENAME TO Clients;

-- Punto 10
DROP TABLE OrderDetails;
